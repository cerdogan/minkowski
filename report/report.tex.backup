\documentclass[letterpaper, 10 pt, conference]{ieeeconf}  
\IEEEoverridecommandlockouts
\usepackage{enumerate}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage[english]{babel}
\usepackage{blindtext}

\title{On New Collision Detection Techniques: Minkowski Sums, Fourier Transforms and Spherical Decomposition}
\author{Can Erdogan \\ CS6491: Computer Graphics \\ Final Project \\ 2015-12-01}

\begin{document}
\maketitle

% -------------------------------------------------------------------------------------------------
% -------------------------------------------------------------------------------------------------
\begin{abstract}
\blindtext 
\blindtext
\end{abstract}


% -------------------------------------------------------------------------------------------------
% -------------------------------------------------------------------------------------------------
\section{Introduction}

Collision detect is one of the fundamental tools for robotics, computer graphics and mechanical 
design. A number of different variants of collision detection is investigated within these fields
with examples ranging from static and dynamic objects in the environment to narrowphase and 
broadphase (single vs. multiple collisions) detections. In this work, we are interested in
the collision of a single pair of static objects. The body of the work is focused on examining
the role of three concepts: (1) Minkowski sums, (2) fourier transformations and (3)
spherical decompositions.

It is a well-known fact that Minkowski sums can be utilized to generate more complex shapes
from simpler primitives. One of the main observations that motivate our research is the utilization
of Fourier transforms to increase the efficiency of their computations. A second motivation is to
observe the effect of shape representation in the efficiency of Fourier transforms and the exploitation
of their underlying properties such as the \textit{convolution theorem} and the \textit{time shifting}.
The bulk of the work is focused on the recent work (2016) of Behandish and Ilie \cite{behandish2016analytic}
who promote the use of spherical decompositions along with non-equispaced Fast Fourier transforms (NFFTs).

\begin{figure}[ht!] 
  \centering
  \includegraphics[width=1.0\linewidth]{Figures/main.png}
  \caption{An example of a }
  \label{fig:main}
\end{figure}

Figure \ref{fig:main} represents one of the key ideas that allow the transformation of object representations
in cartesian space to the frequency space. The idea is that some function $f(x,y)$ (in $\mathbf{R}^2$ for
this example) can be used to represent a cylindrical object (possible an obstacle) and if this so-called
\textit{bump function} is chosen properly (e.g. smoothness, differentiability, etc.), its Fourier transform,
$F(x,y)$, can be exploited in collision detection computations.

This report is organized as follows. First, we present briefly the related work in Fourier transforms,
their use for collision detection in robotics, and the variants of shape descriptors in computer graphics.
Then, we present the idea of Minkowski sums and bump functions to formulate collision detection
rules. In Section IV, we briefly give an overview of the idea of spherical decomposition and its use 
with bump functions, followed by in Section V, with the main treatment of Fourier transformations in
the context of collision detection. We conclusion with preliminary results that confirm the 
findings of \cite{behandish2016analytic} and point out to a number of future speed-up techniques
accumulated from different sources (\cite{behandish2016analytic, kavraki1995computation, lysenko2013fourier}).

% -------------------------------------------------------------------------------------------------
% -------------------------------------------------------------------------------------------------
\section{Related Work}

The Fourier transform, reportedly first used by Carl Friedrich Gauss to compute the period of
an asteroid as a series of sinusoids, has been the linchpin of modern signal processing techniques
since the introduction of Fast Fourier Transforms (FFT)s in 1965 \cite{cooley1965algorithm}. There 
are two key properties that are of interest of FFTs to our work. First, the FFT algorithm computes
the Fourier transform of a discrete signal of length $n$ in O(nlogn) time whereas the classical 
discrete transformation by definition takes O($n^2$) computations. Second, the Fourier transform
of a function in cartesian space represents the data in terms of a summation of different
frequencies. As in \cite{lysenko2013fourier}, we propose the use of this representation by 
first analyzing the values at the higher frequencies and stop the computation of the transformation
if the lack of a collision can be guaranteed. 

One of the key ideas of this work is how the shape representation affects the collision detection
methods. A number of shape descriptors have been proposed in the computer graphics literature 
such as the OBB trees \cite{gottschalk1996obbtree} and voxel-based representations \cite{sagardia2014new}.
The benefit of spherical decompositions is that every sub-part is rotation-invariant and although
within the scope of this work, we limit ourselves to spheres of constant radius, the extension
to variable radii is trivial \cite{behandish2016analytic}. 

The use of spherical decompositions leads to an interesting area of fourier computations,
namely nonequispaced Fast Fourier transforms (FFTs). The traditional DFT algorithm and the
FFT algorithm both assume that the time-varying signal is sampled with equispaced time 
intervals. Although this might be the case with a lot of traditional electrical sensors,
a number of domains such as health sector (MRIs) \cite{knopp2007note}, computational
physics (heat flow computations) \cite{lee2005type}, etc. have sampled from non-equispaced
time nodes. In our domain, the placement of the sphere centers are clearly non-uniform
and \cite{behandish2016analytic} proposed the use of NFFT algorithms to compute
the Fourier transform of a signal composed of their locations. We have examined a number
of prior work in this field \cite{dutt1993fast, dutt1995fast, potts2001fast} and foresee
that the use of these algorithms will increase the efficiency of the Fourier approach
even more \cite{keiner2009using}. However, within the scope of this work, we limit
ourselves to interpolating between the centers of the spheres and generating a 
sparse uniform signal. 



% -------------------------------------------------------------------------------------------------
% -------------------------------------------------------------------------------------------------
\section{Minkowski Sums in Collision Detection}

\subsection{Bump functions}

The two main shape representations we discuss in this work is uniform-sampling and
spherical-sampling which can be interpreted as a list of voxels with 0-1 booleans
for where the voxel intersects the shape and a number of 3D points where spheres
of some constant radii are within the shape. In discussing such representations,
our papers of interest \cite{behandish2016analytic, lysenko2013fourier} choose the adopt 
the descriptor functions $f_S: \mathbf{R}^3 \rightarrow \mathbf{R}$ for
some solid $S$ such that the shape is the domain of $f_S$ where $f_S(x) > 0$. 
This representation is convenient because if we formalize the idea above with
the notation:

\begin{equation}
 U_t(f_S) = \{x \in \text{domain of} \; f_S | f_S(x) > t\},
\end{equation}

then, the union and the intersect of two shapes $S_1$ and $S_2$ become additions and 
dot product of their respective descriptor functions:

\begin{align}
 S_1 \cup S_2 &= U_0(f_{S_1} + f_{S_2}) \\
 S_1 \cap S_2 &= U_0(f_{S_1}f_{S_2})
\end{align}

For instance,
in classical robotics applications, with voxel-based descriptors, the function
$f_S = \mathbf{1}_S$ is an indicator function such that $\mathbf{1}_S(x) = 1$
if and only if $x \in S$. In such a case, two shapes can only intersect if there
exists some $x$ such that both of the shapes have some volume, that is
both $f_{S_1}(x) = f_{S_2}(x) = 1$ and thus, their dot product is greater than 0.
Note that since the analytical expressions of shape descriptors is too complex,
when we refer to operations on these functions, we imply to operations on a set of sampled
values in their domains. 

A number of different variants of descriptor functions are available in addition
to indicator functions that have more smoothness properties and in this work,
for the spherical decomposition approach, we are interested in the following
bump function:

\begin{equation}
 \psi_\alpha(x) = 
 \begin{cases}
    e^{{(1-|x|^{-\alpha}})^{-1}},& \text{if } |x| < 1\\
    0,              & \text{otherwise}
\end{cases}
\end{equation}

\noindent which is parameterized by constant $\alpha$ that changes how
the function behaves close to the non-zero limits. For a single sphere shape $S_0$,
we then define the descriptor function as $f_{B_0} = \psi_\alpha(|x|/r)$ where
$r$ is the radius of the shape. In Figure \ref{fig:bumpAlphas}, we demonstrate
the effect of the $\alpha$ value in the descriptor function outputs. In our 
work, we adopted $\alpha = 1$. Note that $\alpha = \infty$ corresponds to the
indicator function $\mathbf{1}_S(x)$. 

\begin{figure}[ht!] 
  \centering
  \includegraphics[width=1.0\linewidth]{Figures/bump.png}
  \caption{The effect of the $\alpha$ constants in the descriptor function.}
  \label{fig:bumpAlphas}
\end{figure}

\subsection{Use of Minkowski Sums in Early-Miss Tests}


\begin{figure*}[ht!] 
  \centering
  \includegraphics[width=1.0\linewidth]{Figures/bumpConvolved.png}
  \caption{An example of spherical decomposition for a 2D shape and the visualization of the
  shape descriptor function composed of the individual bump functions of the spheres.}
  \label{fig:bumpConvolved}
\end{figure*}

An important observation made in \cite{lysenko2013fourier} is that in most applications, 
the frequency of non-collisions is much higher than collisions. Thus, it is important to bias
our computations towards detecting lack of collisions early on with so-called ``early-miss'' tests.
One example of such early-miss tests is the common adopted of bounding boxes in computer graphics,
specifically ray tracing applications. 

Here, we make a brief note on how the Minkowski sum, can be utilized to implement such a early-miss test. 
First, a brief definition: for two sets $A$ and $B$, their Minkowski sum $A \oplus B$ is defined as
the set:

\begin{equation}
 A \oplus B = \{a+b | a \in A, b \in B\}
\end{equation}

\noindent where, in some applications, it is insisted that for one of the sets, say $A$, the origin $O \in A$. 

The idea behind using the Minkowski sum is to swell up one of the objects say, $S_2$ with a third object
$M$ such that, the negative result of the test $S_1 \cap (S_2 \cup M)$ implies that $S_1 \cap S_2 = \emptyset$.
Clearly, for some choices of $M$, such as elliptic objects, this early-miss test is more efficient. 
Note that the shape descriptor of the Minkowski sum of two objects $M$ and $N$ can be expressed as a convolution of their shape descriptors, a property
that will be useful in the frequency space analysis:

\begin{equation}
M \cup N = U_0(f_M \ast f_N)  
\end{equation}

\noindent where the $\ast$ represents the convolution of the two functions. To learn more about the 
Fourier interpretation of this operation, see the section ``Convolution theorem'' in Section V.
Note that the early-miss test $S_1 \cap (S_2 \cup M)$ now contains two integrals, one for
the convolution and one for the dot product, and in Section V, we will discuss how this situation
can be remedied with Fourier transforms.

% -------------------------------------------------------------------------------------------------
% -------------------------------------------------------------------------------------------------
\section{Spherical Decomposition}

Spherical decomposition of three-dimensional objects has been well studied in the computer graphics
literature. One of the classical approach is based on the medial axis transform (MAT) where the idea
is to represent the shape using spheres with maximal radius such that they are tangential to the
inner surface of the object manifold. A challenge with medial axis approaches is that the MAT of 
an r-set is not necessarily closed, a property that is desirable and achievable with the Minkowski
sum formulation we will show in the next section. Instead, \cite{behandish2016analytic} proposes
a variant of the sphere packing algorithms that exploit the signed distance function field representation
of an object, with reportedly less number of output spheres.

In the left image of Figure \ref{fig:bumpConvolved}, we demonstrate a spherical decomposition of a
two-dimensional object. The idea is to accumulate the bump functions of each sphere, to approximate
the overal shape descriptor function as shown on the right. Next, we formulate this approach using
Minkowski sums that will help us exploit Fourier representation in Section V.

\subsection{Minkowski Sum Formulation}

Let $P$ be the set of center points of the balls $B_i$ that are used to describe an object shape
$S \approx \hat{S} = \bigcup B_i$. The idea is that the approximate shape $\hat{S}$ can be described
as a Minkowski sum of a base ball $B_0$ and the set of center points $P$. We begin with the 
basic description of union of objects as defined in Equation 2:

\begin{equation}
 f_{\hat{S}}(x) = \sum_i f_{B_i}(x) = \sum_{p_i \in P} f_{B_0}(x - p_i)
\end{equation}

\noindent where the use of the central ball $B_0$ is justified by the offset $(x-p_i)$. Then, we 
expand the definition of the ball description function as:

\begin{equation}
 f_{\hat{S}}(x) = \sum_i \int_{\mathbf{R}^3} \delta^3(x^\prime-p_i)[f_{B_0}(x-x^\prime) dx^\prime
\end{equation}

\noindent which allows us to reason about the centers of the balls $p_i$ in the continuous samples
$x^\prime$. 


% -------------------------------------------------------------------------------------------------
% -------------------------------------------------------------------------------------------------
\section{Fourier transforms}

\subsection{Convolution theorem}

\blindtext
\blindtext

\begin{figure*}[ht!] 
  \centering
  \includegraphics[width=1.0\linewidth]{Figures/bumpFouriers.png}
  \caption{An example of a }
  \label{fig:bump}
\end{figure*}

\subsection{Translations with Dirac functions}

\blindtext
\blindtext
\subsection{Fourier cutoffs: Approximation schemes}
\blindtext
\blindtext

% -------------------------------------------------------------------------------------------------
% -------------------------------------------------------------------------------------------------
\section{Results}
\subsection{Faster Minkowski Summation with Fourier Transform}
\blindtext
\blindtext
\subsection{Spherical vs. Uniform Sampling}
\blindtext
\blindtext
% -------------------------------------------------------------------------------------------------
% -------------------------------------------------------------------------------------------------
\section{Future Work}

\subsection{Possible speed-ups}
\blindtext
\blindtext
\subsection{Implementation issues}
\blindtext

% -------------------------------------------------------------------------------------------------
% -------------------------------------------------------------------------------------------------
\section{Conclusion}

% -------------------------------------------------------------------------------------------------
% -------------------------------------------------------------------------------------------------
\bibliographystyle{unsrt}
\bibliography{minkowski}

\end{document}
